<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







  

<link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="基本知识变量和环境变量 变量 在脚本语言中通常不需要声明。在bash中,每一个变量的值都是字符串,无论变量赋值时是否使用 引号,值都会以字符串的形式存储,有一些特殊的变量会被环境和操作系统存储,称为 环境变量  可以使用 env 命令查看所有与终端相关的环境变量  对于进程来说，其运行时的环境变量可以使用下面的命令查看 cat &#x2F;proc&#x2F;$PID&#x2F;environ  获取进程的环境变量   1#可">
<meta property="og:type" content="article">
<meta property="og:title" content="1-基础部分">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;2019&#x2F;12&#x2F;22&#x2F;shell&#x2F;1.%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86&#x2F;index.html">
<meta property="og:site_name" content="Flex">
<meta property="og:description" content="基本知识变量和环境变量 变量 在脚本语言中通常不需要声明。在bash中,每一个变量的值都是字符串,无论变量赋值时是否使用 引号,值都会以字符串的形式存储,有一些特殊的变量会被环境和操作系统存储,称为 环境变量  可以使用 env 命令查看所有与终端相关的环境变量  对于进程来说，其运行时的环境变量可以使用下面的命令查看 cat &#x2F;proc&#x2F;$PID&#x2F;environ  获取进程的环境变量   1#可">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-12-22T14:48:20.756Z">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/12/22/shell/1.基础部分/"/>





  <title>1-基础部分 | Flex</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Flex</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/22/shell/1.%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Flex">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Flex">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">1-基础部分</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-22T19:41:33+08:00">
                2019-12-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/shell/" itemprop="url" rel="index">
                    <span itemprop="name">shell</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="基本知识"><a href="#基本知识" class="headerlink" title="基本知识"></a>基本知识</h1><h2 id="变量和环境变量"><a href="#变量和环境变量" class="headerlink" title="变量和环境变量"></a>变量和环境变量</h2><ul>
<li><p><strong>变量</strong> 在脚本语言中通常不需要<strong>声明</strong>。在bash中,每一个变量的值都是字符串,无论变量赋值时是否使用 <strong>引号</strong>,值都会以字符串的形式存储,有一些特殊的变量会被环境和操作系统存储,称为 <strong>环境变量</strong></p>
</li>
<li><p>可以使用 <strong>env</strong> 命令查看所有与<strong>终端</strong>相关的环境变量</p>
</li>
<li><p>对于进程来说，其运行时的环境变量可以使用下面的命令查看 <code>cat /proc/$PID/environ</code></p>
</li>
<li><p>获取进程的环境变量</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#可以使用该命令获取pid</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">pgrep oracle</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#获取oracle 进程的环境变量 tr用于替换输出中的null字符为换行,更易读</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">sudo cat /proc/17501/environ | tr <span class="string">'\0'</span> <span class="string">'\n'</span></span></pre></td></tr></table></figure>

<ul>
<li>变量的赋值</li>
<li><strong>var = value</strong> 不是赋值操作(等号中间不能有空格),是判断是否相等操作</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#如果有空格 需要使用引号</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ var=<span class="string">" 1"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用$打印</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ <span class="built_in">echo</span> <span class="variable">$var</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">1</span></pre></td></tr></table></figure>

<ul>
<li><strong>环境变量</strong>是如果未在当前进程中定义,可以从父进程<strong>继承</strong>而来</li>
<li><strong>export</strong> 用来设置环境变量,设置后,当前shell执行的任何应用程序都会<strong>继承</strong>这个变量</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#系统会在PATH包含的目录列表中找可执行文件,目录之间使用冒号分隔,PTAH代表可执行文件的环境变量</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ <span class="built_in">echo</span> <span class="variable">$PATH</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">/usr/<span class="built_in">local</span>/bin:/bin:/usr/bin:/usr/<span class="built_in">local</span>/sbin:/usr/sbin:/sbin:/opt/python2.7.10/bin:/opt/python2.7.10/sbin:/home/dev/bin:/opt/python2.7.10/bin:/opt/python2.7.10/bin/python</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#添加一条新路径</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ <span class="built_in">export</span> PATH=<span class="string">"<span class="variable">$PATH</span>:/home/user/bin"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#PATH 通常定义在~/.bash_profile 中</span></span></pre></td></tr></table></figure>

<h2 id="数学运算"><a href="#数学运算" class="headerlink" title="数学运算"></a>数学运算</h2><ul>
<li>使用 let执行简单的数学运算</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ no1=4;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ no2=5</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#变量名前不需要$</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ <span class="built_in">let</span> res=no1+no2</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ <span class="built_in">echo</span> <span class="variable">$res</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">9</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ <span class="built_in">let</span> no1++</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ <span class="built_in">echo</span> <span class="variable">$no1</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">5</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ <span class="built_in">echo</span> <span class="variable">$no1</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">11</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用bc执行浮点运算</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ <span class="built_in">echo</span> <span class="string">"4*0.255"</span> | bc</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">1.020</span></pre></td></tr></table></figure>

<h2 id="文件描述符和重定向"><a href="#文件描述符和重定向" class="headerlink" title="文件描述符和重定向"></a>文件描述符和重定向</h2><ul>
<li><strong>文件描述符</strong>是文件输入,输出相关联的整数,用来跟踪已打开的文件,甚至可以将文件描述符重定向到另外一个文件描述中<ul>
<li>0–stdin 标准输入</li>
<li>1–stdout 标准输出</li>
<li>2–stderr 标准错误</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#这种方式每次都会清空temp文件</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"This is a sample text 1"</span> &gt; temp.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#通过&gt;&gt; 追加 不清空写入</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"This is sample text 2"</span> &gt;&gt; temp.txt</span></pre></td></tr></table></figure>

<ul>
<li>一个命令错误退出,会返回一个非0的数字,可以通过<code>$?</code>取到</li>
<li>处理错误时,stderr的输出都会被定向到<strong>/dev/null</strong>中(<strong>丢弃</strong>)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ ls +</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">ls: 无法访问+: 没有那个文件或目录</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ <span class="built_in">echo</span> $?</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">2</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#错误输出到out.txt中,2代表 stderr的文件描述符</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ ls + 2&gt; out.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#分别重定向</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ ls + 1&gt;stdout.txt 2&gt;stderr.txt</span></pre></td></tr></table></figure>

<ul>
<li><strong>tee</strong> 命令可以提供将数据重定向,同时提供一份<strong>副本</strong></li>
<li><strong>tee</strong> tee命令将find 命令标准输出的数据写入out.txt,同时将标准输出的另一份副本作为cat -n命令的输入</li>
<li>tee 命令只能读取stdout 无法读取<strong>stderr</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ find . -name <span class="string">'a*'</span> | tee out.txt | cat -n</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">     1  ./a2</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">     2  ./a3</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ cat out.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">./a2</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">./a3</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#tee 添加-a选项用于追加</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ find . -name <span class="string">'a*'</span> | tee -a out.txt | cat -n</span></pre></td></tr></table></figure>

<ul>
<li>将脚本内部的文本块进行重定向,下一个EOF行内的内容会被作为<strong>stdin</strong>输入cat中,cat的stdout 会输入log.txt中</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">cat &lt;&lt;EOF&gt;log.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">LOG FILE HEADER</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">This is a <span class="built_in">test</span> <span class="built_in">log</span> file</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">Function: System statistics</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">EOF</span></pre></td></tr></table></figure>

<h2 id="数组和关联数组"><a href="#数组和关联数组" class="headerlink" title="数组和关联数组"></a>数组和关联数组</h2><ul>
<li><strong>数组</strong>: 使用整数作为索引</li>
<li><strong>关联数组</strong>: 使用字符串作为索引</li>
</ul>
<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">rray_var=(1 2 3 4 5 6)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">array_var1[0]=<span class="string">"test1"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">array_var1[1]=<span class="string">"test2"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">array_var1[2]=<span class="string">"test3"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array_var1[1]&#125;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#全部打印</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array_var1[*]&#125;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#打印长度</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#array_var1[*]&#125;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">index=2</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$index</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array_var1[$index]&#125;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">out:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ sh array.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">test2</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">test1 test2 test3</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">3</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">2</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">test3</span></pre></td></tr></table></figure>

<h3 id="关联数组"><a href="#关联数组" class="headerlink" title="关联数组"></a>关联数组</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#定义关联数组</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">declare</span> -A fruits_value</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">fruits_value=([apple]=<span class="string">'100dollars'</span> [orange]=<span class="string">'150 dollars'</span>)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"Apple costs <span class="variable">$&#123;fruits_value[apple]&#125;</span>"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#列出 key</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;!fruits_value[*]&#125;</span></span></pre></td></tr></table></figure>

<h2 id="使用别名"><a href="#使用别名" class="headerlink" title="使用别名"></a>使用别名</h2><ul>
<li><strong>别名</strong>就是一种便捷方式,省去输入长串命令的麻烦</li>
<li><strong>alial</strong>命令只是暂时,永久生效需要加入<strong>.bashrc</strong>中,每当一个<strong>新的shell</strong>进程生成时都会执行该文件</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> vi=vim</span></pre></td></tr></table></figure>

<h2 id="获取-设置日期-和延时"><a href="#获取-设置日期-和延时" class="headerlink" title="获取,设置日期,和延时"></a>获取,设置日期,和延时</h2><ul>
<li>类<strong>unix</strong>  中,日期被存储为整数,大小来自于世界标准时间<strong>utc</strong> 1970年1月1日0时0分0秒起流逝的秒数,这种计时方式称为<strong>纪元时或unix时间</strong></li>
<li>在脚本前面加 <strong>time</strong> 可以获得脚本的执行时间</li>
<li>使用纪元时间可以很方便的计算时间之间的差值</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ date</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">2017年 07月 08日 星期六 03:20:23 CST</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#打印纪元时</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ date +%s</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">1499455280</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用date作为参数,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ date --date <span class="string">"Thu Nov 18 08:07:21 IST 2010"</span> +%s</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">1290047841</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ date --date <span class="string">"Jan 20 2001"</span> +%A</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">星期六</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ date <span class="string">"+%d %B %Y"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">08 七月 2017</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ date -s <span class="string">"21 June 2009 11:01:22"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">date: 无法设置日期: 不允许的操作</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">2009年 06月 21日 星期日 11:01:22 CST</span></pre></td></tr></table></figure>

<h3 id="脚本中生成延时"><a href="#脚本中生成延时" class="headerlink" title="脚本中生成延时"></a>脚本中生成延时</h3><ul>
<li>在脚本中推迟一段时间,可以使用<strong>sleep</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> Count:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">count=0</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">true</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">if</span> [ <span class="variable">$count</span> -lt 40 ];</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">then</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">        <span class="comment">#使用let 执行算术运算</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">        <span class="built_in">let</span> count++;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">        sleep 1;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">        <span class="built_in">echo</span>  <span class="variable">$count</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">else</span> <span class="built_in">exit</span> 0;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">fi</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">done</span></span></pre></td></tr></table></figure>

<h2 id="调试脚本"><a href="#调试脚本" class="headerlink" title="调试脚本"></a>调试脚本</h2><ul>
<li>脚本前面添加 -x 选项对脚本进行调试 <code>sh -x script.sh</code></li>
</ul>
<h2 id="函数和参数"><a href="#函数和参数" class="headerlink" title="函数和参数"></a>函数和参数</h2><ul>
<li>函数的定义和使用</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">fname</span></span>() &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$1</span>, <span class="variable">$2</span>; <span class="comment">#访问参数1和参数2</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$@</span>"</span>;<span class="comment">#以列表的方式一次性打印所有参数 echo "$*";</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"$*"</span><span class="variable">$#</span>和<span class="built_in">echo</span><span class="variable">$@</span>类似,函数会被当做字符串,很少使用</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">return</span> 0; <span class="comment">#返回值</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">fname ; <span class="comment">#执行函数</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">fname arg1 arg2 ; <span class="comment">#传递参数</span></span></pre></td></tr></table></figure>
<ul>
<li>递归调用</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">F</span></span>()&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">    <span class="built_in">echo</span> <span class="variable">$1</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    F hello;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">    sleep 1;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">F;</span></pre></td></tr></table></figure>

<ul>
<li>读取命令和返回值</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">CMD=<span class="string">"ls"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="variable">$CMD</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#$?代表返回值</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ $? -eq 0 ];</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">then</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$CMD</span> executed successfully"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$CMD</span> terminated unsuccessfully"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">fi</span></span></pre></td></tr></table></figure>

<h2 id="命令序列的输出读入变量"><a href="#命令序列的输出读入变量" class="headerlink" title="命令序列的输出读入变量"></a>命令序列的输出读入变量</h2><ul>
<li>一个命令的<strong>输出</strong>可以作为另一个命令的<strong>输入</strong>,而这个命令的输出又会<strong>传递</strong>至另一个命令</li>
<li>输入通常是通过<strong>stdin</strong> 或参数传递给命令,输出要么为<strong>stdout stderr</strong>,使用多个命令时,称命令为<strong>过滤器(filter)</strong> ,我们使用<strong>管道(pipe)</strong>。<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">cmd1 | cmd2 |cmd3</span></pre></td></tr></table></figure>

</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">ls | cat -n &gt; out.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#读取由管道相连的命令输出 称为子shell</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ cmd_output=$(ls |cat -n)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ <span class="built_in">echo</span> <span class="variable">$cmd_output</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">1 a2 2 a3 3 array.sh 4 a.sh 5 a.txt 6 debug.sh 7 err.txt 8 hello.sh 9 imput.txt 10 input.txt 11 log.txt 12 map.sh 13 output.txt 14 out.txt 15 printf.sh 16 root.sh 17 script.sh 18 sleep.sh 19 stderr.txt 20 stdout.txt 21 success_test.sh 22 temp.txt 23 variables.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#和上述类似,称为反引用</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ cmd_output=`ls |cat -n`</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ <span class="built_in">echo</span> <span class="variable">$cmd_output</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">1 a2 2 a3 3 array.sh 4 a.sh 5 a.txt 6 debug.sh 7 err.txt 8 hello.sh 9 imput.txt 10 input.txt 11 log.txt 12 map.sh 13 output.txt 14 out.txt 15 printf.sh 16 root.sh 17 script.sh 18 sleep.sh 19 stderr.txt 20 stdout.txt 21 success_test.sh 22 temp.txt 23 variables.sh</span></pre></td></tr></table></figure>
<ul>
<li>使用()括号在shell中生成一个<strong>独立</strong>的shell进程,<strong>子shell</strong>中的操作不会影响<strong>主shell</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">pwd</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">(<span class="built_in">cd</span> /bin; ls);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#执行后目录没有改变</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">pwd</span>;</span></pre></td></tr></table></figure>

<h2 id="字段分隔符和迭代器"><a href="#字段分隔符和迭代器" class="headerlink" title="字段分隔符和迭代器"></a>字段分隔符和迭代器</h2><ul>
<li><p><strong>内部字段分隔符(Internal Field Separator，IFS)</strong>是shell脚本编程中的一个重要概念。内部字段分隔符是用于特定用途的定界符。IFS是<strong>存储定界符</strong>的环境变量,IFS环境变量用于存储分隔符环境变量</p>
</li>
<li><p>迭代逗号分隔的字符</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">data=<span class="string">"name,sex,rollno,location"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">oldIFS=<span class="variable">$IFS</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#IFS 的默认值为空白字符</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">IFS=,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> <span class="variable">$data</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">    <span class="built_in">echo</span> Item:<span class="variable">$item</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">done</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">out:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ sh ifs.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">Item:name</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">Item:sex</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">Item:rollno</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">Item:location</span></pre></td></tr></table></figure>

</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">line=<span class="string">"root:x:0:0:root:/root:/bin/bash"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">oldIFS=<span class="variable">$IFS</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">IFS=<span class="string">":"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">count=0</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> <span class="variable">$line</span>:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">#count == 0</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">    [ <span class="variable">$count</span> -eq 0 ] &amp;&amp; user=<span class="variable">$item</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">    [ <span class="variable">$count</span> -eq 6 ] &amp;&amp; shell=<span class="variable">$item</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">    <span class="built_in">let</span> count++</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">done</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">IFS=<span class="variable">$oldIFS</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$user</span> is shell is <span class="variable">$shell</span></span></pre></td></tr></table></figure>

<h2 id="bash中的循环-迭代"><a href="#bash中的循环-迭代" class="headerlink" title="bash中的循环(迭代)"></a>bash中的循环(迭代)</h2><ul>
<li><strong>for</strong> 循环</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#方便的生成不同的序列</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ <span class="built_in">echo</span> &#123;1..50&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 1.0]$ <span class="built_in">echo</span> &#123;a..z&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">a b c d e f g h i j k l m n o p q r s t u v w x y z</span></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> &#123;a..z&#125;:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    <span class="built_in">echo</span> <span class="variable">$var</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">done</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># c形式</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>((i=0; i&lt;10; i++))</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>
<ul>
<li><strong>while 循环</strong>,条件为假停止</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> True</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">  <span class="keyword">do</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">      commands;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">  <span class="keyword">done</span></span></pre></td></tr></table></figure>

<h2 id="比较与测试"><a href="#比较与测试" class="headerlink" title="比较与测试"></a>比较与测试</h2><ul>
<li><strong>if</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> condition;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">then</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">commands; </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">fi</span></span></pre></td></tr></table></figure>
<ul>
<li><strong>else if else</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> condition;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">then</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">	commands;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> condition; <span class="keyword">then</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">	commands;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">	commands;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">fi</span></span></pre></td></tr></table></figure>
<ul>
<li>算术比较放置在封闭的<strong>中括号</strong>内,在<strong>[]</strong> 需要使用空格隔开<ul>
<li>(-eq ==)</li>
<li>(-ne !=)</li>
<li>(-gt &gt;)</li>
<li>(-lt &lt;)</li>
<li>(-ge &gt;=)</li>
<li>(-le &lt;=)</li>
<li>(-a 与)</li>
<li>(-o 或)</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[ <span class="variable">$var</span> -eq 0 ] <span class="comment">#当$var等于0时，返回真</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">[ <span class="variable">$var</span> -ne 0 ] <span class="comment">#当 $var 为非 0 时，返回真</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">[ <span class="variable">$var1</span> -ne 0 -a <span class="variable">$var2</span> -gt 2 ] <span class="comment">#使用逻辑与-a</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">[ <span class="variable">$var1</span> -ne 0 -o var2 -gt 2 ] <span class="comment">#逻辑或 -o</span></span></pre></td></tr></table></figure>

<ul>
<li>文件系统相关测试<ul>
<li>[ -f $file_var ]:如果给定的变量包含正常的文件路径或文件名，则返回真</li>
<li>[ -x $var ]:如果给定的变量包含的文件可执行，则返回真。</li>
<li>[ -d $var ]:如果给定的变量包含的是目录，则返回真。</li>
<li>[ -e $var ]:如果给定的变量包含的文件存在，则返回真。</li>
<li>[ -c $var ]:如果给定的变量包含的是一个字符设备文件的路径，则返回真</li>
<li>[ -b $var ]:如果给定的变量包含的是一个块设备文件的路径，则返回真。</li>
<li>[ -w $var ]:如果给定的变量包含的文件可写，则返回真。</li>
<li>[ -r $var ]:如果给定的变量包含的文件可读，则返回真。</li>
<li>[ -L $var ]:如果给定的变量包含的是一个符号链接，则返回真。</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">fpath=<span class="string">"/etc/passwd"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ -e <span class="variable">$fpath</span> ];<span class="keyword">then</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    <span class="built_in">echo</span> File exists</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    <span class="built_in">echo</span> Dose not exist;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">fi</span></span></pre></td></tr></table></figure>
<ul>
<li><p>字符串比较,使用字符串比较,使用<strong>双中括号[[]]</strong></p>
<ul>
<li>[[ $str1 = $str2 ]] 注意加空格,空格没写,表示赋值</li>
<li>[[ $str1 == $str2 ]]</li>
<li>[[ $str1 != $str2 ]]</li>
</ul>
</li>
<li><p>逻辑运算符 &amp;&amp; 和 || 能够很容易地将多个条件组合起来</p>
</li>
<li><p>[[ -z $str1 ]]:如果str1包含的是空字符串，则返回真。</p>
</li>
<li><p>[[ -n $str1 ]]:如果str1包含的是非空字符串，则返回真</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [[ -n <span class="variable">$str1</span> ]] &amp;&amp; [[ -z <span class="variable">$str2</span> ]] ;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">     <span class="keyword">then</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">commands;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">fi</span></span></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">tr1=<span class="string">"Not empty"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">str2=<span class="string">""</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">i1f [[ -n <span class="variable">$str1</span> ]] &amp;&amp; [[ -z <span class="variable">$str2</span> ]]</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">then</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    <span class="built_in">echo</span> str1 is nonempty and str2 is empty string</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">fi</span></span></pre></td></tr></table></figure>

<h2 id="使用cat进行拼接"><a href="#使用cat进行拼接" class="headerlink" title="使用cat进行拼接"></a>使用cat进行拼接</h2><ul>
<li>cat 用于读取,显示,拼接内容</li>
<li>读取内容</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ cat file.txt file1.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">hello world</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">hello world</span></pre></td></tr></table></figure>

<ul>
<li>标准输入中读取需要使用管道符 <code>echo &quot;hello world&quot; | cat</code></li>
<li>使用cat 删除文本文件<strong>相邻</strong>多余的空行,这里只会将相邻的空白行删除,并不是删除空白行</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">cat -s file.txt &gt; a.out</span></pre></td></tr></table></figure>
<ul>
<li>使用cat -T 标记出制表符(编写python 代码会使用) <code>cat -T file.txt</code></li>
<li>使用cat -n 可以为标准输出增加一个行号 <code>cat -n file.txt</code></li>
</ul>
<h2 id="文件查找与文件列表"><a href="#文件查找与文件列表" class="headerlink" title="文件查找与文件列表"></a>文件查找与文件列表</h2><ul>
<li>列出当前目录和目录下所有的文件和文件夹 <code>find base_path</code> <code>find .</code> <code>find -print0 使用&#39;\0&#39; 作为文件名分隔</code></li>
<li><strong>-name</strong> 指定了文件名必须匹配的参数,可以使用通配符</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ find . -name <span class="string">'*.txt'</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">./file.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">./file1.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># -name 可以忽略大小写</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ find . -iname <span class="string">'file*'</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">./File.txx</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">./file.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">./file1.txt</span></pre></td></tr></table></figure>

<ul>
<li>可以在匹配中使用-o(or) 多加一个匹配条件</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ find . -name <span class="string">"*.txt"</span> -o -name <span class="string">'a*'</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">./a.out</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">./file.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">./file1.txt</span></pre></td></tr></table></figure>

<ul>
<li><strong>-path</strong> 参数可以使用通配符来匹配路径</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[dev@localhost shell]$ find . -path <span class="string">"*/2.0/*"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">./2.0/File.txx</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">./2.0/a.out</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">./2.0/file.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">./2.0/file1.txt</span></pre></td></tr></table></figure>

<ul>
<li><strong>!</strong>表示否定参数</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不以txt结尾的文件</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ find . ! -name <span class="string">'*.txt'</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">.</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">./File.txx</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">./a.out</span></pre></td></tr></table></figure>

<ul>
<li><strong>-type</strong>根据文件类型搜索<ul>
<li>普通文件 f</li>
<li>符号链接 l</li>
<li>目录 d</li>
<li>字符设备 c</li>
<li>块设备  b</li>
<li>套接字 s</li>
<li>FIFO p</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#只列出目录</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">[dev@localhost shell]$ find . -<span class="built_in">type</span> d</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">.</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">./2.0</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">./1.0</span></pre></td></tr></table></figure>
<ul>
<li><strong>-size</strong> 根据文件大小进行搜索<ul>
<li>b —— 块(512字节)</li>
<li>c —— 字节</li>
<li>w —— 字(2字节)</li>
<li>k —— 1024字节</li>
<li>M —— 1024K字节</li>
<li>G —— 1024M字节</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ find . -<span class="built_in">type</span> f -size 12c</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">./file1.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ find . -<span class="built_in">type</span> f -size +12c</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">./a.out</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">./file.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ find . -<span class="built_in">type</span> f -size -12c</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">./File.txx</span></pre></td></tr></table></figure>

<ul>
<li><p><strong>-delete</strong>删除文件 <code>find . -type f -name &quot;*.swp&quot; -delete</code></p>
</li>
<li><p><strong>-perm</strong>  基于文件权限匹配 <code>find . -type  f -perm 644</code></p>
</li>
<li><p><strong>-user</strong> 基于文件所有权匹配<code>find . -type f -user dev</code></p>
</li>
<li><p>find 跳过目录,不查找.svn目录</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[root@localhost 2.0]<span class="comment"># find . \( -name '.svn' -prune \) -o \( -type f -print \)</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">./File.txx</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">./a.out</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">./a1</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">./file.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">./file1.txt</span></pre></td></tr></table></figure>

<h2 id="xargs"><a href="#xargs" class="headerlink" title="xargs"></a>xargs</h2><ul>
<li>使用 | 可以将标准输出转化为标准输入 <code>cat foo.txt | grep &#39;test&#39;</code></li>
<li>使用 xargs 可以将标准输出转化为命令行参数</li>
<li>xargs 应该紧跟在管道符号之后 <code>command | xargs</code></li>
<li>多行输入装换为单行输出,默认使用” “ 作为定界符</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ cat example.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">1 2 3 4</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">4 5 6</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ cat example.txt | xargs</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">1 2 3 4 4 5 6</span></pre></td></tr></table></figure>
<ul>
<li>单行输入转化为多行输出 -n 指定每行的最大参数</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ cat example.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">1 2 3 4 4 5 6</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ cat example.txt |xargs -n 3</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">1 2 3</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">4 4 5</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">6</span></pre></td></tr></table></figure>

<ul>
<li>使用<strong>xargs</strong>时候使用 <strong>-d</strong> 定义定界符</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ <span class="built_in">echo</span> <span class="string">"aaaaaaabaaaaaabaaaab"</span> | xargs -d b</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">aaaaaaa aaaaaa aaaa</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># 字符b作为分隔,分隔出的内容每一个参数为一行</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ <span class="built_in">echo</span> <span class="string">"aaaaaaabaaaaaabaaaab"</span> | xargs -d b -n 1</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">aaaaaaa</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">aaaaaa</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">aaaa</span></pre></td></tr></table></figure>

<ul>
<li>读取标准输入<strong>stdin</strong>,将格式化后的参数传递给命令</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">测试shell cecho.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> $* <span class="string">'#'</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">out:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#-n 参数指定xargs 每行最多参数个数</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ cat args.txt | xargs -n 1</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">arg1</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">arg2</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">arg3</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ cat args.txt | xargs -n 1 sh cecho.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">arg1 <span class="comment">#</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">arg2 <span class="comment">#</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">arg3 <span class="comment">#</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ cat args.txt | xargs -n 3 sh cecho.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">arg1 arg2 arg3 <span class="comment">#</span></span></pre></td></tr></table></figure>
<ul>
<li><strong>xargs</strong> 结合<strong>find</strong>,使用<strong>-print0</strong>(使用’\0’作为文件名分隔),使用<strong>-0</strong>作为输入界定</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#删除文件需要加-print0 和 -0 避免误删</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">find . -<span class="built_in">type</span> f -name <span class="string">"*.txt"</span> -print0 | xargs -0 rm -f</span></pre></td></tr></table></figure>

<ul>
<li>统计源码行数</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">find . -<span class="built_in">type</span> f -name <span class="string">"*.py"</span> -print0 | xargs -0 wc -l</span></pre></td></tr></table></figure>

<h2 id="用tr进行转换"><a href="#用tr进行转换" class="headerlink" title="用tr进行转换"></a>用tr进行转换</h2><ul>
<li><p><strong>tr</strong> 命令可以对来自<strong>标准输入</strong>的内容进行字符替换,字符删除,重复字符压缩等命令,因而也被称为<strong>转换命令</strong></p>
</li>
<li><p><strong>tr</strong> 只能通过<strong>stdin</strong> 来接收输入 <code>tr [options] set1 set2</code>,将来自标准输入的字符从set1__映射<strong>到set2,输出到</strong>stdout__。</p>
</li>
<li><p>大写转换为小写,’A-Z’ ‘a-z’都是,有效集合,可以根据需求定制集合</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ <span class="built_in">echo</span> <span class="string">"HELLO WORLD"</span> | tr <span class="string">'A-Z'</span> <span class="string">'a-z'</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">hello world</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#加密</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ <span class="built_in">echo</span> 12345 | tr <span class="string">'0-9'</span> <span class="string">'9876543210'</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">87654</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#制表符装换为空格 应为只接受标准输入 使用&lt;符号</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ tr <span class="string">'\t'</span> <span class="string">' '</span> &lt; file.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">hello world</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">    hello world</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">    hello world</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">    hello world</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">    hello world</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">    hello world</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">    hello world</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">    hello world</span></pre></td></tr></table></figure>

<ul>
<li><strong>tr</strong> 删除字符,使用 <strong>-d</strong>选项,删除字符集合</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ <span class="built_in">echo</span> <span class="string">"Hello 123 world 456"</span> | tr -d <span class="string">'0-9'</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">Hello  world</span></pre></td></tr></table></figure>
<ul>
<li><strong>-c</strong> 使用补集去反</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#不在 0-9 空格 \n中的字符删除</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> hello 1 char 2 next 4 | tr -d -c <span class="string">'0-9 \n'</span></span></pre></td></tr></table></figure>

<ul>
<li><em>-s</em> 压缩字符</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#压缩空白字符</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ <span class="built_in">echo</span> <span class="string">"GNU is     not UNIX."</span> | tr -s <span class="string">' '</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">GNU is not UNIX.</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#删除多余的换行</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ cat t.txt | tr -s <span class="string">'\n'</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">djkjkfjkd</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">kddkjfkdjf</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">jfkjdkj</span></pre></td></tr></table></figure>

<h2 id="效验和与核实"><a href="#效验和与核实" class="headerlink" title="效验和与核实"></a>效验和与核实</h2><ul>
<li><p><strong>效验和(checksum)</strong>程序用于从文件中生成效验和密钥，然后利用这个<strong>效验和密钥</strong>核实文件的<strong>完整性</strong></p>
</li>
<li><p>用于文件完整性测试的特定密钥就称为<strong>效验和</strong></p>
</li>
<li><p>我们对原始文件和接收到的文件都进行校验和计算。通过比对两者的校验和，就能够核实<br>接收到的文件是否正确。</p>
</li>
<li><p>使用最为广泛的校验和技术是<strong>md5sum和SHA-1</strong>。它们对文件内容使用相应的算法来生成校验和</p>
</li>
<li><p>效验文件完整性</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ md5sum file.txt File.txx foo.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">d41d8cd98f00b204e9800998ecf8427e  file.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">d41d8cd98f00b204e9800998ecf8427e  File.txx</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">9876a7217f2cd43ca2027e8b03badd65  foo.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ md5sum file.txt File.txx foo.txt &gt; file_sum.md5</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ md5sum -c file_sum.md5</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">file.txt: 确定</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">File.txx: 确定</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">foo.txt: 确定</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ sha1sum file.txt File.txx foo.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">da39a3ee5e6b4b0d3255bfef95601890afd80709  file.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">da39a3ee5e6b4b0d3255bfef95601890afd80709  File.txx</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">c7e4be43993389ab647e72b672882919b11e7f40  foo.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ sha1sum file.txt File.txx foo.txt &gt; file_sum.sha1</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ sha1sum -c file_sum.sha1</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">file.txt: 确定</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">File.txx: 确定</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">foo.txt: 确定</span></pre></td></tr></table></figure>
<ul>
<li>对目录进行效验</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ find . -<span class="built_in">type</span> f -print0 | xargs -0 md5sum &gt;&gt; dir.md5</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ md5sum -c dir.md5</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">./args.txt: 确定</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">./File.txx: 确定</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">./cecho.sh: 确定</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">./t.txt: 确定</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">./a.out: 确定</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">./a1: 确定</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">./file.txt: 确定</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">./file_sum.sha1: 确定</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">./file_sum.md5: 确定</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">./file1.txt: 确定</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">./dir.md5: 失败</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">./example.txt: 确定</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">./foo.txt: 确定</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">md5sum: 警告：1/13 生成的校验和不匹配</span></pre></td></tr></table></figure>

<h2 id="加密工具与散列"><a href="#加密工具与散列" class="headerlink" title="加密工具与散列"></a>加密工具与散列</h2><ul>
<li><strong>base64</strong>:Base64是一组相似的编码方案，它将ASCII字符转换成以64为基数的形式，以可读的ASCII字符串来描述二进制数据。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#编码为Base64</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">dev@localhost 2.0]$ base64 file1.txt &gt; file1.base64</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#解码Base64</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ base64 -d file1.base64</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">hello world</span></pre></td></tr></table></figure>

<ul>
<li><strong>md5sum 和 sha1sum</strong> 都是单向<strong>散列算法</strong> 。无法逆推出原始数据。它们通常用于验证数据 <strong>完整性</strong>或为<strong>特定数据</strong>生成唯一的<strong>密钥</strong>,是<strong>存储密码</strong>的理想方案。</li>
</ul>
<h2 id="排序·唯一与重复"><a href="#排序·唯一与重复" class="headerlink" title="排序·唯一与重复"></a>排序·唯一与重复</h2><ul>
<li><p><strong>sort</strong> 命令能够帮助我们从<strong>文本文件</strong>和<strong>stdin</strong> 进行排序操作。</p>
</li>
<li><p><strong>-n</strong>指定按照数字排序 <strong>r</strong>代表逆序排序 <strong>k</strong>代表按照那一个键进行,键指列号。sort命令对字母表和数字排序有不同的处理方式,使用数字排序,要明确给出-n选项。</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ cat data.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">1  mac    2000</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">2  winxp    4000</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">3  bsd    1000</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">4  linux    1000</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#按照数字第二列逆序排列</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ sort -nrk 1 data.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">4  linux    1000</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">3  bsd    1000</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">2  winxp    4000</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">1  mac    2000</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#按照第二列排序</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ sort -k 2 data.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">3  bsd    1000</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">4  linux    1000</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">1  mac    2000</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">2  winxp    4000</span></pre></td></tr></table></figure>

<ul>
<li><strong>uniq</strong> 命令能够从<strong>文本</strong>或<strong>stdin</strong>中提取<strong>唯一或重复</strong>的行,该命令要么使用<strong>管道</strong>,要么将排序过的文件作为输入,与<strong>sort</strong>结合使用</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ cat sorted.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">bash</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">foss</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">hack</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">hack</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#重复的行只会打印一次</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ cat sorted.txt | uniq</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">bash</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">foss</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">hack</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#-u 只显示唯一的行</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ cat sorted.txt | uniq -u</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">bash</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">foss</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#-c 统计各行出现的次数</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ cat sorted.txt | uniq -c</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">      1 bash</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">      1 foss</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">      2 hack</span></pre></td></tr></table></figure>

<h2 id="分割文件和数据"><a href="#分割文件和数据" class="headerlink" title="分割文件和数据"></a>分割文件和数据</h2><ul>
<li>使用<strong>split</strong>命令对文件进行分割</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#-b指定分割大小为1k 默认使用字母作为后缀</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">split -b 1k t.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">out:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ find . -<span class="built_in">type</span> f -name <span class="string">'x*'</span> -print0</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">./xak./xaj./xai./xad./xab./xah./xae./xam./xal./xan./xao./xac./xaf./xaa./xag</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#-d 指定使用数字作为后缀,-a指定了长度</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">split -b 1k t.txt -d -a 4</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">out:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ find . -name <span class="string">'x0*'</span> -print0</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">./x0005./x0006./x0000./x0007./x0009./x0013./x0012./x0010./x0001./x0014./x0002./x0008./x0003./x0011./x0004</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#自定义前缀</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">split -b 1k t.txt -d -a 4 split_file</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">out:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ find . -name <span class="string">'split_*'</span> -print0</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">./split_file0002./split_file0005./split_file0013./split_file0012./split_file0006./split_file0010./split_file0009./split_file0008./split_file0011./split_file0000./split_file0007./split_file0001./split_file0014./split_file0004./split_file0003</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#-l 按行数切分</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">split -l 10 t.txt</span></pre></td></tr></table></figure>

<h2 id="交互输入自动化"><a href="#交互输入自动化" class="headerlink" title="交互输入自动化"></a>交互输入自动化</h2><ul>
<li>自动化输入时,按下回车键会发送<strong>‘\n’</strong>,通过添加\n,就可以获得发送给<strong>stdin</strong>的标准输入,通过发送与用户输入等同的字符串,就可以实现交互过程中的自动发送输入</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">read</span> -p <span class="string">"Enter number:"</span> no;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">read</span> -p <span class="string">"Enter name:"</span> name;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> You have entered <span class="variable">$no</span>, <span class="variable">$name</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">out:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ <span class="built_in">echo</span> <span class="string">'1\nhello\n'</span> | ./interactive.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">You have entered 1nhellon,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#-e 表明echo 会解释转义序</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ <span class="built_in">echo</span> -e <span class="string">'1\nhello\n'</span> | ./interactive.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">You have entered 1, hello</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ <span class="built_in">echo</span> -e <span class="string">'1\nhello\n'</span> &gt; input.data</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ cat input.data</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">1</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">hello</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ ./interactive.sh &lt; input.data</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">You have entered 1, hello</span></pre></td></tr></table></figure>

<ul>
<li>使用<strong>expect</strong>做输入检查<ul>
<li>spawn 参数指定需要自动化执行那一个命令</li>
<li>expect参数提供需要等待的消息</li>
<li>send是要发送的消息</li>
<li>expect eof指明命令交互结束</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/expect</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">spawn ./interactive.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">expect <span class="string">"Enter number:"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">send <span class="string">"1\n"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">expect <span class="string">"Enter name:"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">send <span class="string">"hello\n"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">expect eof</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 2.0]$ ./automate_expect.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">spawn ./interactive.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">Enter number:1</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">Enter name:hello</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">You have entered 1, hello</span></pre></td></tr></table></figure>

<h2 id="利用并行进程执行命令"><a href="#利用并行进程执行命令" class="headerlink" title="利用并行进程执行命令"></a>利用并行进程执行命令</h2><ul>
<li>使用$!来获取进程的<strong>PID</strong>,报错着最近一个后台进程的PID。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#定义一个数组</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">PIDARRAY=()</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> File.iso File.iso</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">#后台运行</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">    md5sum <span class="variable">$file</span> &amp;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">#得到PID放入数组</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">    PIDARRAY+=(<span class="string">"$!"</span>)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">done</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用wait等待命令结束</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">wait</span> <span class="variable">$&#123;PIDARRAY[@]&#125;</span></span></pre></td></tr></table></figure>

<ul>
<li>Unix将操作系统中的一切都视为<strong>文件</strong>。所有操作都离不开文件,目录，普通文件，块设备，字符设备，符号链接，套接字，命名管道等</li>
</ul>
<h2 id="生成任意大小文件"><a href="#生成任意大小文件" class="headerlink" title="生成任意大小文件"></a>生成任意大小文件</h2><ul>
<li><strong>dd</strong> 命令会克隆给定的输入内容，然后将一模一样的副本写入到输出，<strong>stdin,设备文件，普通文件</strong>都可以作为输入，<strong>stdout,设备文件，普通文件</strong>也可作为输出</li>
<li>使用dd命令一定要仔细检查，否者会清空磁盘或损坏数据</li>
<li><strong>/dev/zero</strong> 是一个字符设备，会不断返回<strong>\0值</strong>字节</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">#创建一个1M大小的文件junk.data if(input file)代表输入,of(output file)代表输出,bs代表大小，count代表块数</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">dd if&#x3D;&#x2F;dev&#x2F;zero of&#x3D;junk.data bs&#x3D;1M count&#x3D;1</span></pre></td></tr></table></figure>
<h2 id="文件权限，所有权，粘滞位"><a href="#文件权限，所有权，粘滞位" class="headerlink" title="文件权限，所有权，粘滞位"></a>文件权限，所有权，粘滞位</h2><ul>
<li><strong>用户(user)</strong> 是文件的所有者，<strong>用户组(group)</strong> 是多个用户的集合，<strong>其他用户(other)</strong>是除用户和用户组之外的任何人</li>
<li>第一个字母表明了文件类型<ul>
<li><ul>
<li>普通文件</li>
</ul>
</li>
<li>d 目录</li>
<li>c 字符设备</li>
<li>b 块设备</li>
<li>l 符号链接</li>
<li>s 套接字</li>
<li>p 管道</li>
</ul>
</li>
<li>剩下的部分可以划分成三组，每组3个字符。第一组的3个字符对应<strong>用户权限(所有者)</strong>，第二组对应<strong>用户组权限</strong>，第三组对应<strong>其他用户权限</strong><ul>
<li><strong>用户(权限序列:rwx——)</strong>:第一个字符指定用户是否拥有文件的<strong>读权限</strong>。如果为用户设置了读权限，r将出现在第一个字符的位置上。第二个字符指定了<strong>写(修改)权限(w)</strong>， 第三个字符指定了用户是否拥有<strong>执行权限(x，即运行该文件的权限)</strong>。可执行文件通常会设置执行权限。用户还有一个称为setuid(S)的特殊权限，它出现在执行权限(x) 的位置。setuid权限允许用户以其拥有者的权限来执行可执行文件，即使这个可执行文件是由其他用户运行的。</li>
<li>对于目录来说<ul>
<li>目录的读权限(r)允许读取目录中文件和子目录的列表;</li>
<li>目录的写权限(w)允许在目录中创建或删除文件或目录;</li>
<li>目录的执行权限(x)指明是否可以访问目录中的文件和子目录</li>
</ul>
</li>
<li>目录有一个特殊的权限，叫做<strong>粘滞位(sticky bit)</strong>,如果设置了该位只有创建该目录的用户才能<strong>删除</strong>目录中的文件,粘滞位出现在其他用户权限中的<strong>执行权限(x)</strong>位置。如果没有设置执行权限，但设置了粘滞位，就使用<strong>t</strong>;如果同时设置了执行权限和粘滞位，就使用<strong>T</strong>。</li>
</ul>
</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 3.0]$ ls -l</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">总用量 1048</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">-rw-rw-r--. 1 dev dev      36 7月  12 03:01 A.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">-rw-rw-r--. 1 dev dev      27 7月  12 03:00 B.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">-rw-rw-r--. 1 dev dev 1048576 7月  12 02:45 junk.data</span></pre></td></tr></table></figure>
<h2 id="使用chmod设置文件权限"><a href="#使用chmod设置文件权限" class="headerlink" title="使用chmod设置文件权限"></a>使用chmod设置文件权限</h2><ul>
<li>u-用户权限 g-用户组权限 o-其他实体权限</li>
<li>可以使用 + 添加权限 - 删除权限</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#a表示全部</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">chmod a+x A.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">chmod o+x A.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">chmod a-x A.txt</span></pre></td></tr></table></figure>
<ul>
<li><p>可以使用八进制数字表示 777 表示 rwx rwx rwx</p>
<ul>
<li>r–=4</li>
<li>-w-=2</li>
<li>–x=1</li>
</ul>
</li>
<li><p><strong>chown</strong>更改所有权</p>
</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">chown root.root A.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#设置粘滞位</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">chmod a+t 3.0/</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#递归方式设置</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">chmod 777 2.0/ -R</span></pre></td></tr></table></figure>

<h2 id="创建不可修改文件"><a href="#创建不可修改文件" class="headerlink" title="创建不可修改文件"></a>创建不可修改文件</h2><ul>
<li>常见的linux扩展文件系统中(<strong>ext2,ext3,ext4等</strong>),可以借助某种文件属性将文件设置为不可修改，一旦设置，任何用户(包括超级用户)都不能<strong>删除</strong>该文件，除非其不可修改的属性被移除。通过查看 <strong>/etc/mtab</strong>文件，我们很容易获知所有挂载分区的<strong>文件系统类型</strong>。 这个文件的第一列指定了分区设备路径(如 /dev/sda5)，第三列指定了文件系统类型(如ext3)。</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">/dev/mapper/VolGroup-lv_root / ext4 rw 0 0</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">proc /proc proc rw 0 0</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">sysfs /sys sysfs rw 0 0</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">devpts /dev/pts devpts rw,gid=5,mode=620 0 0</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">tmpfs /dev/shm tmpfs rw,rootcontext=<span class="string">"system_u:object_r:tmpfs_t:s0"</span> 0 0</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">/dev/sda1 /boot ext4 rw 0 0</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">none /proc/sys/fs/binfmt_misc binfmt_misc rw 0 0</span></pre></td></tr></table></figure>
<ul>
<li><p><strong>/etc/resolv.conf</strong> 就是这样一个例子,该文件包含了一组DNS列表,当用户修改这个文件后，再次连接到ISP后，这个文件会被恢复，为了避免该情况，需要将文件设置为不可修改。</p>
</li>
<li><p><strong>chattr</strong> 可以设置文件为不可修改</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 3.0]$ sudo chattr +i file</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">[sudo] password for dev:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 3.0]$ rm file</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">rm：是否删除有写保护的普通空文件 &quot;file&quot;？y</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">rm: 无法删除&quot;file&quot;: 不允许的操作</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 3.0]$ sudo chattr -i file</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 3.0]$ rm file</span></pre></td></tr></table></figure>

<h2 id="批量生成空白文件"><a href="#批量生成空白文件" class="headerlink" title="批量生成空白文件"></a>批量生成空白文件</h2><ul>
<li><strong>touch</strong> 命令批量生成空白文件或修改文件的时间戳</li>
<li>如果文件已经存在，会修改文件当前的时间戳为实际时间</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> &#123;1..100&#125;.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    touch <span class="variable">$name</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">done</span></span></pre></td></tr></table></figure>

<h2 id="查找符号链接及其指向目标"><a href="#查找符号链接及其指向目标" class="headerlink" title="查找符号链接及其指向目标"></a>查找符号链接及其指向目标</h2><ul>
<li><strong>符号链接</strong>在类Unix系统中很常见。符号链接只不过是指向其他文件的指针。它在功能上类似于Mac OS中的别名或Windows中的 快捷方式。<strong>删除</strong>符号链接不会影响到原始文件。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">ln -s &#x2F;var&#x2F;www&#x2F; ~&#x2F;web</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">#readlink 打印出符号链接指向的目标路径</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">[dev@localhost ~]$ readlink web</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">&#x2F;var&#x2F;www&#x2F;</span></pre></td></tr></table></figure>

<h2 id="环回文件"><a href="#环回文件" class="headerlink" title="环回文件"></a>环回文件</h2><ul>
<li><p><strong>loopback</strong> 环回文件系统通常是在设备上(例如磁盘分区)创建<strong>文件系统</strong>。这些存储设备能够以设备文件的形式来使用，比如 <strong>/dev/device_name</strong>。 为了使用存储设备上的文件系统，我们需要将其挂载到一些被称为<strong>挂载点(mount point)</strong>的目录上。<strong>环回文件系统</strong>是指那些在文件中而非物理设备中创建的文件系统。我们可以将这些文件作为文件系统挂载到<strong>挂载点</strong>上。这实际上可以让我们在物理磁盘上的文件中创建逻辑磁盘。</p>
</li>
<li><p>挂载环回文件</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">dd if&#x3D;&#x2F;dev&#x2F;zero of&#x3D;loobackfile.img bs&#x3D;1G count&#x3D;1</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">#创建ext4文件系统,需要文件系统才能将文件存储到磁盘或环回文件</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">mkfs.ext4 loopbackfile.img</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">mkdir &#x2F;mnt&#x2F;loopback</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">#使用mount命令将环回文件挂载到挂载点上,-o loop 指明是环回文件</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">mount -o loop loopbackfile.img &#x2F;mnt&#x2F;loopback</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">#卸载</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">umount &#x2F;mnt&#x2F;loopback</span></pre></td></tr></table></figure>

<h2 id="查找文件差异并进行修复"><a href="#查找文件差异并进行修复" class="headerlink" title="查找文件差异并进行修复"></a>查找文件差异并进行修复</h2><ul>
<li><strong>diff</strong> 生成差异文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"># -u用于一体化输出,-代表删除的行，+代表添加的行</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 3.0]$ diff -u version1.txt version2.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">--- version1.txt        2017-08-01 22:41:24.329680787 +0800</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">+++ version2.txt        2017-08-01 22:42:53.278680676 +0800</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">@@ -1,5 +1,5 @@</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"> this is the original text</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"> line2</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">-line3</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line"> line4</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"> happy hacking !</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">+GNU is not UNIX</span></pre></td></tr></table></figure>
<ul>
<li>打补丁</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">diff -u version1.txt version2.txt &gt; version.patch</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">patch -p1 version1.txt &lt; version.patch</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">#撤销补丁</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">patch -p1 -R version1.txt &lt; version.patch</span></pre></td></tr></table></figure>
<h2 id="head和tail-打印文件"><a href="#head和tail-打印文件" class="headerlink" title="head和tail 打印文件"></a>head和tail 打印文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 3.0]$ cat 1.txt | head</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">#############</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">oppp</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">o</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">#############</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">#############</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">#############</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">iii</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">#############</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">#打印前4行</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 3.0]$ head -n 4 1.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">#############</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">oppp</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">o</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">#############</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">#打印最后5行之外的行</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 3.0]$ head -n -5 1.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">#############</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">oppp</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">o</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">#############</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line">#############</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line">#############</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line">iii</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">28</span></pre></td><td class="code"><pre><span class="line">#打印最后5行</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">29</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 3.0]$ tail -n 5 1.txt</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">30</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">31</span></pre></td><td class="code"><pre><span class="line">#############</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">32</span></pre></td><td class="code"><pre><span class="line">#############</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">33</span></pre></td><td class="code"><pre><span class="line">#############</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">34</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">35</span></pre></td><td class="code"><pre><span class="line">#tail -f 可以增量检测文件变化</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">36</span></pre></td><td class="code"><pre><span class="line">tail -f &#x2F;var&#x2F;log&#x2F;messages</span></pre></td></tr></table></figure>
<h2 id="列出目录的各种方法"><a href="#列出目录的各种方法" class="headerlink" title="列出目录的各种方法"></a>列出目录的各种方法</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#当使用-F时，所有的输出项都会添加上一个代表文件类型的字符，如@、*、|等,目录对应的是/字符</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">[dev@localhost shell]$ ls -F |grep <span class="string">'/'</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">1.0/</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">2.0/</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">3.0/</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#深度设置为1 指定type 为 d目录选项</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">[dev@localhost shell]$ find . -<span class="built_in">type</span> d -maxdepth 1 -<span class="built_in">print</span></span></pre></td></tr></table></figure>
<h2 id="pushd-和popd"><a href="#pushd-和popd" class="headerlink" title="pushd 和popd"></a>pushd 和popd</h2><ul>
<li><strong>push 和 popd</strong> 可以用于在多个目录之间切换,该命令以栈的方式运作，后进先出</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#压入路径</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">[dev@localhost shell]$ <span class="built_in">pushd</span> /var/www/</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">/var/www ~/learn/shell</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#压入路径</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">[dev@localhost www]$ <span class="built_in">pushd</span> /usr/src/</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">/usr/src /var/www ~/learn/shell</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#列出路径</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">[dev@localhost src]$ <span class="built_in">dirs</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">/usr/src /var/www ~/learn/shell</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#按照编号进入 从0开始编号</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">[dev@localhost src]$ <span class="built_in">pushd</span> +1</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">/var/www ~/learn/shell /usr/src</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">[dev@localhost www]$ <span class="built_in">pushd</span> +2</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">/usr/src /var/www ~/learn/shell</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#删除最后添加的路径</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">[dev@localhost src]$ <span class="built_in">popd</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">/var/www ~/learn/shell</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#按照标号删除</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">[dev@localhost www]$ <span class="built_in">popd</span> +1</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">/var/www</span></pre></td></tr></table></figure>

<h2 id="tree-命令-打印目录树"><a href="#tree-命令-打印目录树" class="headerlink" title="tree 命令 打印目录树"></a>tree 命令 打印目录树</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">#-P 打印某些文件 -h标明大小</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">[dev@localhost ~]$ tree learn&#x2F; -P &quot;*.sh&quot; -h</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">learn&#x2F;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">└── [4.0K]  shell</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    ├── [4.0K]  1.0</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    │   ├── [ 245]  array.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">    │   ├── [ 103]  a.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    │   ├── [  25]  b.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">    │   ├── [  72]  debug.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">    │   ├── [  81]  for.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">    │   ├── [  61]  hello.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">    │   ├── [ 252]  ifs1.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">    │   ├── [  96]  ifs.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">    │   ├── [ 162]  map.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">    │   ├── [ 121]  null.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">    │   ├── [  98]  path.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">    │   ├── [ 104]  printf.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">    │   ├── [  59]  root.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">    │   ├── [ 114]  script.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">    │   ├── [ 211]  sleep.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">    │   ├── [ 137]  success_test.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">    │   ├── [  59]  until.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">    │   └── [  64]  variables.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line">    ├── [4.0K]  2.0</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line">    │   ├── [ 122]  automate_expect.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line">    │   ├── [  12]  cecho.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line">    │   ├── [4.0K]  dir</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">28</span></pre></td><td class="code"><pre><span class="line">    │   ├── [ 217]  gen_md5.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">29</span></pre></td><td class="code"><pre><span class="line">    │   ├── [ 104]  interactive.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">30</span></pre></td><td class="code"><pre><span class="line">    │   └── [ 191]  rename.sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">31</span></pre></td><td class="code"><pre><span class="line">    └── [4.0K]  3.0</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">32</span></pre></td><td class="code"><pre><span class="line">        └── [  49]  touch.sh</span></pre></td></tr></table></figure>

<h2 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h2><ul>
<li>tar 文件可以对命令进行归档，将多个文件和文件夹保存为单个文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">tar -cf output.tar [SOURCES]</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">tar -cf output.tar file1 file2 file3 folder1</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">#列出归档文件</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 4.0]$ tar -tf output.tar</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">file</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">file1</span></pre></td></tr></table></figure>

<ul>
<li>冗长模式 -V 该模式会输出<strong>详细信息</strong>。对于tar命令，-f代表文件名字，必须是<strong>最后</strong>一个参数</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 4.0]$ tar -tvf output.tar</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">-rw-rw-r-- dev&#x2F;dev          76 2017-08-02 07:50 file</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">-rw-rw-r-- dev&#x2F;dev           6 2017-08-02 07:59 file1</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 4.0]$ tar -cvf output.tar file file1</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">file</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">file1</span></pre></td></tr></table></figure>
<ul>
<li><p><strong>-c</strong> 选项代表 “<strong>创建文件</strong>”,<strong>-f</strong> 代表 “<strong>指定文件名</strong>”</p>
</li>
<li><p>向已经归档的文件添加文件</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 4.0]$ tar -rvf output.tar file</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">file</span></pre></td></tr></table></figure>

<ul>
<li>归档文件中<strong>提取</strong>文件 <strong>-x</strong>代码 <strong>exact</strong> 提取</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 4.0]$ tar -xvf output.tar</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">file</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">file1</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">file</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"># -C 选项指定提取目标目录</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 4.0]$ tar -xvf output.tar -C test&#x2F;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">file</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">file1</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">file</span></pre></td></tr></table></figure>
<h2 id="压缩tar"><a href="#压缩tar" class="headerlink" title="压缩tar"></a>压缩tar</h2><ul>
<li>通常的压缩格式:<ul>
<li>file.tar.gz  -z</li>
<li>file.tar.bz2  -j</li>
<li>file.tar.lzma –lzma</li>
</ul>
</li>
<li>也可以不明确指定上面那些特定的选项来使用压缩功能。tar能够通过查看输出或输入文件 的扩展名来进行压缩。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 4.0]$ tar -acvf test.tar.gz test&#x2F;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">test&#x2F;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">test&#x2F;file</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">test&#x2F;file1</span></pre></td></tr></table></figure>
<ul>
<li>打包的时候 排除.svn .git目录</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">tar --exclude-vcs -czvf source_code.tar.gz eye_of_gnome_svn</span></pre></td></tr></table></figure>
<h2 id="gzip"><a href="#gzip" class="headerlink" title="gzip"></a>gzip</h2><ul>
<li><p><strong>gzip</strong> 是linux 经常使用的压缩格式。gzip只能压缩单个文件或数据流，因此，需要先创建tar归档文件,然后在用gzip压缩</p>
</li>
<li><p>gzip 可以用于<strong>压缩和解压缩</strong></p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 4.0]$ gzip file</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 4.0]$ ls</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">a    b.c          file.gz  file2       output.tar        student_data.txt  test.tar.gz</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">a.c  cookie_file  file1    index.html  range_fields.txt  test</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 4.0]$ gunzip file.gz</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">#使用数据流作为输入,输出到指定的压缩文件</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">[dev@localhost 4.0]$ cat file2 |gzip -c &gt; file.gz</span></pre></td></tr></table></figure>

<h2 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h2><ul>
<li>zip 压缩常用于<strong>windows</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">zip file.zip file</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">#对目录和文件进行递归操作</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">zip -r archive.zip folder1 folder2</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">#提取内容</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">unzip file.zip</span></pre></td></tr></table></figure>

<h2 id="rsync"><a href="#rsync" class="headerlink" title="rsync"></a>rsync</h2><ul>
<li><strong>rsync</strong>可以对远端文件和目录进行同步，比起cp该命令只同步有变化的文件，效率很高</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">#本地文件移动到远端,定期运行，只会复制更改的文件</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">rsync -av &#x2F;home&#x2F;slynux&#x2F;data slynux@192.168.0.6:&#x2F;home&#x2F;backups&#x2F;data</span></pre></td></tr></table></figure>
<ul>
<li>排除不需要更新的文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">rsync -av &#x2F;home&#x2F;slynux&#x2F;data slynux@192.168.0.6:&#x2F;home&#x2F;backups&#x2F;data --exclude &quot;*.txt&quot;</span></pre></td></tr></table></figure>



      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/12/22/py_module/subprocess/" rel="next" title="1-subprocess">
                <i class="fa fa-chevron-left"></i> 1-subprocess
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/12/22/Redis/1.%E5%9F%BA%E7%A1%80/" rel="prev" title="1-基础">
                1-基础 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/logo.jpg"
                alt="Flex" />
            
              <p class="site-author-name" itemprop="name">Flex</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">41</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#基本知识"><span class="nav-number">1.</span> <span class="nav-text">基本知识</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#变量和环境变量"><span class="nav-number">1.1.</span> <span class="nav-text">变量和环境变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数学运算"><span class="nav-number">1.2.</span> <span class="nav-text">数学运算</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件描述符和重定向"><span class="nav-number">1.3.</span> <span class="nav-text">文件描述符和重定向</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数组和关联数组"><span class="nav-number">1.4.</span> <span class="nav-text">数组和关联数组</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#数组"><span class="nav-number">1.4.1.</span> <span class="nav-text">数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#关联数组"><span class="nav-number">1.4.2.</span> <span class="nav-text">关联数组</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用别名"><span class="nav-number">1.5.</span> <span class="nav-text">使用别名</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#获取-设置日期-和延时"><span class="nav-number">1.6.</span> <span class="nav-text">获取,设置日期,和延时</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#脚本中生成延时"><span class="nav-number">1.6.1.</span> <span class="nav-text">脚本中生成延时</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#调试脚本"><span class="nav-number">1.7.</span> <span class="nav-text">调试脚本</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#函数和参数"><span class="nav-number">1.8.</span> <span class="nav-text">函数和参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#命令序列的输出读入变量"><span class="nav-number">1.9.</span> <span class="nav-text">命令序列的输出读入变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#字段分隔符和迭代器"><span class="nav-number">1.10.</span> <span class="nav-text">字段分隔符和迭代器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#bash中的循环-迭代"><span class="nav-number">1.11.</span> <span class="nav-text">bash中的循环(迭代)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#比较与测试"><span class="nav-number">1.12.</span> <span class="nav-text">比较与测试</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用cat进行拼接"><span class="nav-number">1.13.</span> <span class="nav-text">使用cat进行拼接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件查找与文件列表"><span class="nav-number">1.14.</span> <span class="nav-text">文件查找与文件列表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#xargs"><span class="nav-number">1.15.</span> <span class="nav-text">xargs</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用tr进行转换"><span class="nav-number">1.16.</span> <span class="nav-text">用tr进行转换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#效验和与核实"><span class="nav-number">1.17.</span> <span class="nav-text">效验和与核实</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#加密工具与散列"><span class="nav-number">1.18.</span> <span class="nav-text">加密工具与散列</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#排序·唯一与重复"><span class="nav-number">1.19.</span> <span class="nav-text">排序·唯一与重复</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#分割文件和数据"><span class="nav-number">1.20.</span> <span class="nav-text">分割文件和数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#交互输入自动化"><span class="nav-number">1.21.</span> <span class="nav-text">交互输入自动化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#利用并行进程执行命令"><span class="nav-number">1.22.</span> <span class="nav-text">利用并行进程执行命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#生成任意大小文件"><span class="nav-number">1.23.</span> <span class="nav-text">生成任意大小文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件权限，所有权，粘滞位"><span class="nav-number">1.24.</span> <span class="nav-text">文件权限，所有权，粘滞位</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用chmod设置文件权限"><span class="nav-number">1.25.</span> <span class="nav-text">使用chmod设置文件权限</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建不可修改文件"><span class="nav-number">1.26.</span> <span class="nav-text">创建不可修改文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#批量生成空白文件"><span class="nav-number">1.27.</span> <span class="nav-text">批量生成空白文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查找符号链接及其指向目标"><span class="nav-number">1.28.</span> <span class="nav-text">查找符号链接及其指向目标</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#环回文件"><span class="nav-number">1.29.</span> <span class="nav-text">环回文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查找文件差异并进行修复"><span class="nav-number">1.30.</span> <span class="nav-text">查找文件差异并进行修复</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#head和tail-打印文件"><span class="nav-number">1.31.</span> <span class="nav-text">head和tail 打印文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#列出目录的各种方法"><span class="nav-number">1.32.</span> <span class="nav-text">列出目录的各种方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pushd-和popd"><span class="nav-number">1.33.</span> <span class="nav-text">pushd 和popd</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tree-命令-打印目录树"><span class="nav-number">1.34.</span> <span class="nav-text">tree 命令 打印目录树</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tar"><span class="nav-number">1.35.</span> <span class="nav-text">tar</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#压缩tar"><span class="nav-number">1.36.</span> <span class="nav-text">压缩tar</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#gzip"><span class="nav-number">1.37.</span> <span class="nav-text">gzip</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#zip"><span class="nav-number">1.38.</span> <span class="nav-text">zip</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#rsync"><span class="nav-number">1.39.</span> <span class="nav-text">rsync</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Flex</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
